<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script>
    // 프로미스
    // 이벤트 리스너를 사용할 때 콜백 함수를 자주 사용
    // 그러나 요즘엔 콜백 대신 프로미스를 자주 사용
    // 실행은 바로 하되 결괏값은 나중에 받는 객체

    const condition = true; // true 면 resolve, false 면 reject
    const promise = new Promise((resolve, reject) =>{
        if (condition){
            resolve('성공');
        } else {
            reject('실패');
        }
    });
    promise
        .then((message) => {
            console.log(message); // 성공한 경우 실행
        })
        .catch((error)=>{
            console.error(error); // 실패한 경우 실행
        })
        .finally(()=>{  // 끝나고 무조건 실행
            console.log('무조건');
        });

    // promise
    //     .then((message)=>{
    //         return new Promise((resolve, reject)=>{
    //             resolve(message);
    //         });
    //     })
    //     .then((message2)=>{
    //         return new Promise((resolve, reject)=>{
    //             resolve(message2);
    //         });
    //     })
    //     .then((message3)=>{
    //         console.log(message3);
    //     })
    //     .catch((error)=>{
    //         console.error(error); // 실패한 경우 실행
    //     })
    // then을 계속해서 이어갈수도 있는데, 대신에
    // then에서 new Promise를 return 해야 다음 then에서 받을 수 있다.

    // function findAndSaveUser(Users){
    //     Users.findOne({})
    //         .then((user)=>{
    //             user.name = 'zero';
    //             return user.save();
    //         })
    //         .then((user)=>{
    //             return Users.findOne({gender:'m'});
    //         })
    //         .then((user)=>{
    //             //생략
    //         })
    //         .catch((error)=>{
    //         console.error(error); // 실패한 경우 실행
    //     })
    // }

    // 프로미스를 여러개 실행할 수 있는 방법
    const promise1 = Promise.resolve('성공1');
    const promise2 = Promise.resolve('성공2');
    Promise.all([promise1, promise2])
        .then((result)=>{
            console.log(result); // ['성공1','성공2']
        })
        .catch((error)=>{
            console.error(error); // 실패한 경우 실행
        })

        
</script>
<body>
    
</body>
</html>